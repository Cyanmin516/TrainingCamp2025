# 網域網站
- speacher: pro. Huang
- date: 2025-7-31
- class 8 
- 新增網站

#IIS #DNS #DomainName #IP/port #web #WindowsServer2022 #ASP.net #framework 

## 資安實務
情資，定期更新惡意IP

## DNS
主機怎麼查詢網站
1. 本機hosts
2. 詢問DNS
    * 主機名稱
    * IP
    * TCP(port):80
 
### 在DNS伺服器新增主機映照表
DNS 新增www
- 工具
- DNS
- DC
- 正向對應區域
- `Lab03.com.tw`
- 新增主機
    - host`www` 
    - IP `192.168.142.12`
自動引導回FS伺服器


範例使fail連線改成本地主機並成功啟動
1. `www.Lab03.com.tw` => fail
2. `fs.Lab03.com.tw` => success

## 新增站台 
指定IP 分別啟動不同網站
IIS 設定網卡、添加檔案、新增網站、設定預設文件、開啟防火牆、外部支援框架
1. 新增IP網卡
- 網路設定
- 介面卡
- 右鍵`Ethernet0`選 內容
- IPv4 > 內容
- 進階 > IP > 新增
- IP `192.168.58.15` Mask `255.255.255.0`

2. 指定路徑為網站根目錄
- 建立資料夾`D:\www\class10\p8`
- 新增htm首頁`home88.htm`

3. IIS管理員
- 起始網頁
- FS
- 站台
- default web server
- 右側 **繫結** 
    - 指定 IP
    - 清空指定主機名稱
- 回到站台 
- sup 新的站台
- 右側 **繫結**
    - 指定 IP
    - 清空指定主機名稱

3. 網站設定
- **虛擬目錄**，分離內外名稱，提高維護性
- **繫結**，管理IP與連接埠
- **預設文件**，不指定文件顯示網頁時，預設檔案`index.htm`與`Default.htm`，第一個優先。

4. 防火牆設定
網頁預設80 port，如果需要其他port 則需要到防火牆添加規則
步驟
- 搜尋 `wf.msc` 或是 防火牆>進階
- 輸入規則 > 新增規則
- 連接埠 
- `TCP` / 特定本機連接埠: `8888`
- 允許連線
- +網域  +私人 +公用
- 名稱`port8888`，最好寫備註

5. 到DNS伺服器更新
更新[`主機`、`IP` ]

6. ASP.Net 4.8 
許多開發使用asp.net
`asp.net 3.5`在server上更新會失敗
所以請更新`4.8`或更新的版本

- 工具 
- 新增角色與功能
- 安裝類型 > 角色
- 伺服器 > fileserver
- 角色 > 網頁伺服器 >應用程式開發 > .NET擴充性4.8 > ASP.NET 4.8

web.config 調用預設文件順序


