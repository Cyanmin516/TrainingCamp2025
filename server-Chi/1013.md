# Linux  mail server
- speacher: pro.Chi
- date: 2025-10-13
- class 11

#mail #postfix dovecot


#course goals

## 實務
不要管email server，又累又雜。很多廣告信與惡意郵件
將email 託管google，本地端只管理SMTP與人員帳號。
所有雲端資料要自行加密。

企業傳輸都走VPN

Linux mail: dovecot 管理帳戶與收信; postfix專門送信不考慮帳戶


## final test
web, database, dns
dns, web wordpress, ftp, database, firewall

## 資源指令
```bash
硬體空閒、shm約全部1/5快取
df -h
資料夾大小
du -sh /path
網路
ip a
ping 
traceroute
記憶體
free -h
運算CPU
uptime
```

## SMTP
修改postfix，dovecot管帳，設定轉發規則

vim /etc/postfix/main.cf
```bash
disable_vrfy_command = yes
#來源
smtpd_helo_required = yes
#10 MB限制
message_size_limit = 10240000
#
smtpd_sasl_type = dovecot
smtpd_sasl_path = private/auth
smtpd_sasl_auth_enable = yes
smtpd_sasl_security_options = noanonymous
smtpd_sasl_local_domain = $myhostname
smtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination

smtpd_client_restrictions = permit_mynetworks, reject_unknown_client_hostname, permit
smtpd_sender_restrictions = permit_mynetworks, reject_unknown_sender_domain, reject_non_fqdn_sender
smtpd_helo_restrictions = permit_mynetworks, reject_unknown_hostname, reject_non_fqdn_hostname, reject_invalid_hostname, permit
:wq
#end vim


systemctl restart postfix 
systemctl status postfix
```

## roundcube
網頁mail伺服器

```bash
tar zx

run php composer.phar install --no-dev
```

 
nginx -t 
nginx -s reload





