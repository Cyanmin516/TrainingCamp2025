# Linux 使用者群組 與 目錄檔案
- speacher: pro.Chi
- date: 2025-8-7
- class 5
- vbird Chapter 4
- vbird Chapter 5

#user #group #chmod #ps #tpo
## LINUX 三角
- 使用者&群組
- 權限
- 檔案&目錄

cmd
新增檔案 touch
新增目錄 mkdir

使用者
/etc/passwd
群組
/etc/group

| act | user | Group |
|:-|:-|:-|
| 新增 | useradd | groupadd |
| 修改 | usermod | groupmod |
| 密碼 | passwd  | gpasswd很少用 |
| 刪除 | userdel | groupdel |
| 查詢 | w, who, whoami |

### sample
```console
useradd peter peter
groupadd golf
usermod -aG golf peter
#check
id peter
grep peter /etc/passwd
userdel -r peter
## sudo rm -d -r /home/peter
```

## 權限

- r 讀取
- w 修改
- x 執行

1. 使用者/owner
2. group
3. others 

所以會有三組權限控制
>root# ls -dl /home

> drwxr-xr-x. 3 root root date path

- 檔案
d 目錄
c 裝置
b block區塊
l 連結檔
p 對外pipeline
s socket


### User right test

as know

| user | add groups |
|:-|:-|
| test1 | testgroup |
| test2 | testgroup |
| test3 | testgroup |
| test4 |  |

#### sample1
-rw-r--r--. root root  test.txt

| user | right |
|:-|:-|
| test1 | r--  |
| test2 | r-- |
| test3 | r-- |
| test4 | r-- |

#### sample2
-rwxr-xr--. test1 testgroup own.txt

| user | right |
|:-|:-|
| test1 | rwx  |
| test2 | r-x |
| test3 | r-x |
| test4 | r-- |

copy is write `r`


###  更改權限
```
chown user.group filePath

chmod g+x checkfile
chmod u+w checkfile
chmod o+r checkfile
chmod 754 checkfile
chmod u=rwx,g=rw,o=r checkfile
```

echo $LS_COLORS
列出文件顏色


### **程式對系統稱之為 Socket**

**Socket** 是軟體層面的概念。當一個**應用程式**（如瀏覽器、遊戲）需要與網路上的其他程式通訊時，它會向**作業系統**發出請求，建立一個 Socket。這個 Socket 就像是一個通訊的端點，讓應用程式可以透過它收發網路資料，而不需要直接處理複雜的網路協定（如 TCP/IP）。

你可以想像成：**Socket 讓程式能「插上」網路，開始對外溝通。**

### **硬體對系統稱之為 Driver**

**Driver**（驅動程式）是硬體層面的概念。當一個**硬體裝置**（如滑鼠、鍵盤、顯示卡、印表機）需要與**作業系統**溝通時，它需要一個驅動程式。這個驅動程式是一段特殊的程式碼，它作為硬體和作業系統之間的翻譯官，讓作業系統知道如何控制這個硬體，以及如何從它那裡接收資料。

你可以想像成：**Driver 讓硬體能「被系統看見」，並發揮其功能。**

---

### 總結與比較

| 項目 | **Socket** | **Driver** |
| :--- | :--- | :--- |
| **對象** | 應用程式（軟體） | 硬體裝置 |
| **角色** | 軟體通訊介面 | 硬體溝通介面 |
| **功能** | 讓應用程式能進行網路通訊 | 讓作業系統能控制硬體 |
| **比喻** | 程式的「網路插座」 | 硬體的「翻譯官」 |

這兩個概念都扮演著**抽象化**的角色：Socket 將複雜的網路通訊簡化為幾個簡單的函式呼叫；而 Driver 則將複雜的硬體操作隱藏起來，讓作業系統可以統一地管理所有裝置。這讓程式設計師和系統管理員都能更專注於他們各自的任務，而不需要深入了解底層的複雜細節。




## 4.3.2 群組共用功能
切換群組

# 5 檔案與目錄
刪除目錄 需要 w 權限

drwx------ student student date /home/student
-rwx------ root root date /home/student/root-data

student使用者可以刪除自己的資料夾 /home/student
但無法看到root-data


刪檔案 上一層目錄 w 權限
目錄沒有 R 權限: 無法列舉檔案
目錄沒有 W 權限: 無法存放檔案
目錄沒有 X 權限: 使用者無法移動到該資料夾內

/dev/shm/ 快取資料夾 大檔案執行較快
/etc/hosts/ IP 對照表 系統Domain table

## 程序
在記憶體內
USER
PID
%CPU
%MEM
VSZ
RSS 
TTY
TIME

ps aux 列舉全部
top 動態觀察

### 優先序
nice = -20 ~ 19;
一般使用者nice為0-19
PRI越小越優先
PRI = PRI + NI

執行中用 renice 調整優先序
比較少用到

### 5.2.4 bash 工作管理

常見的工作管理使用的符號與組合按鍵如下：

command & ：直接將 command 丟到背景中執行，若有輸出，最好使用資料流重導向輸出到其他檔案
[ctrl]+z ：將目前正在前景中的工作丟到背景中暫停
jobs [-l]：列出目前的工作資訊
fg %n ：將第 n 個在背景當中的工作移到前景來操作
bg %n ：將第 n 個在背景當中的工作變成執行中

which passwd
/bin/passwd
/bin/passwd
/etc/shadow


[root@C50303 ~]# ll /bin/passwd
-rwsr-xr-x. 1 root root 32648  8月 10  2021 /bin/passwd
讀者可發現使用者權限的 x 變成了 s ，此即 SUID 的權限旗標。由 SUID 的定義來看，passwd 設定了 SUID，且 passwd 的擁有者為 root 這個人， 因此只要任何人具有 x 的執行權，當用戶執行 passwd 時，就會自動透過 SUID 轉換身份成為 owner ，亦即變成了 root 的身份。 所以 student 執行 passwd 的過程中，身份會自動的變成 root。
> chmod u+s student
rwsr-xr-x

chmod g+s 
rwxr-sr-x
群組內都可以執行

SUID: u+s 4
SGID: g+s 2
StickBit o+t 1
=7

chmod 2777
-rwxrwsrws

chmod 特殊權限一般權限

#### next
yum 抓取
網路
DNS
WEB


