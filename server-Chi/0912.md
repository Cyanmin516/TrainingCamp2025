# Linux Network Setting
- speacher: pro.Chi
- date: 2025-9-12
- class 7
- vbird Chapter 12
- vbird Linux server 1

#DNS #yum_repo #resolv.conf #database #mariadb #web_server #nginx #php

## DNS

```bash
dnf -y install bind bind-chroot bind-utils

```

## 修改mirror 站點
```sh
cd /etc/yum.repos.d/
vim centos.repo
### IN VIM
[baseos]
必須註解原有連結
#metalink=https://mirrors.centos.org/metalink?repo=centos-baseos-$stream&arch=$basearch&protocol=https,http
設定新站台
baseurl=https://mirror.twds.com.tw/centos-stream/9-stream/BaseOS/x86_64/os/ #設定新站台

[appstream]
必須註解原有連結
#metalink=https://mirrors.centos.org/metalink?repo=centos-appstream-$stream&arch=$basearch&protocol=https,http
設定新站台
baseurl=https://mirror.twds.com.tw/centos-stream/9-stream/AppStream/x86_64/os/ 
:wq
### END VIM

vim epel.repo
### IN VIM  
[epel]
必須註解原有連結
#metalink=https://mirrors.fedoraproject.org/metalink?repo=epel-9&arch=$basearch&infra=$infra&content=$contentdir 
設定新站台
baseurl=https://mirror.twds.com.tw/fedora/epel/9/Everything/x86_64/ 
:wq
### END VIM

vim epel-cisco-openh264.repo
### IN VIM
[epel-cisco-openh264]
改為不啟用
enable=0
### END VIM

dnf clean all
yum clean all
#redo install
dnf -y install bind bind-chroot bind-utils
```
 
 ## dns
```sh 
 vim named.conf
### IN VIM
optoin
    listen-on port 53 {IP; 127.0.0.1}
    allow-query {IP/24; localhost}
:wq
### END VIM

systemctl enable --now named
firewall-cmd --add-service=dns
firewall-cmd --add-service=dns --permanent

#vim /etc/resolv.conf
search student103.example.com
nameserver 10.10.53.103
nameserver 10.10.2.8

dig www.student.com.tw
#check out port 53
ss -nlp | grep ":53"
```

 ## 視窗最大最小化
 - 概覽
 - 設定
 - 程式集
 - 調教 gnome
 - 安裝
 - 視窗標題欄
 - 最大化、最小化:開啟
 - VM重啟

 ```sh
 dnf install gnome-tweaks
 ```

## dnf search mariadb
```sh
dnf install mariadb mariadb-server
systemctl enable --now mariadb
mysql_secure_installation
mysql -u root -p -h localhost

firewall-cmd --add-service=mysql
firewall-cmd --add-service=mysql --permanent
systemctl enable --now mariadb
```

## HTTP server
```sh
列出套件
dnf module list nginx
指定版本
dnf module enable nginx:1.26
安裝
dnf module install nginx
啟動
systemctl enable --now nginx
允許服務
firewall-cmd --add-service=http
firewall-cmd --add-service=http --permanent
systemctl enable --now nginx
```


## php
```sh
dnf module list php
指定版本
dnf module enable php:8.3
dnf install php php-fpm
vim /usr/share/nginx/html/index.php
system enable --now php-fpm
system restart nginx
```

```php
<?php
phpinfo();
>
```

## 
phpmyadmin
management mysql and mariadb
download phpmyadmin
```sh
解壓縮
mv /home/manger/下載/phpMyAdmin-5.2.2-all-languages.tar.xz  /usr/share/nginx/html/
cd /usr/share/nginx/html
tar -Jxvf phpMyAdmin-5.2.2-all-languages.tar.xz 

mv phpMyAdmin-5.2.2-all-languages phpMyAdmin
dnf install php-mysqlnd php-pdo
cp phpMyAdmin/config.sample.inc.php phpMyAdmin/config.inc.php
vim phpMyAdmin/config.inc.php
### 每次改密碼都要重新設定這個雜湊HASH
$cfg['blowfish_secret'] = 'any string u can write in'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */
###
重啟
systemctl restart php-fpm
systemctl restart nginx
虛擬目錄
restorecon -Rvv phpMyAdmin
```

### mysql 更改密碼
```sh
mysql -u root -p
ALTER USER 'root'@'localhost' IDENTIFIED BY '新密碼';
```


## wordpress
download wordpress from offical website
```sh
dnf module list mariadb
systemctl stop mariadb
dnf remove mariadb-*
dnf module enable mariadb:10.11
dnf module install mariadb
systemctl enable --now mariadb
mysql_secure_install
mv /home/manager/下載wordpress-6.8.2-zh_TW.zip /usr/share/nginx/html/
cd /usr/share/nginx/html/
unzip wordpress-6.8.2-zh_TW.zip
cd wordpress
mv wp-config-sample.php wp-config.php
vim wp-config.php
###
define('DB_NAME','wordpress' );
define('DB_USER','wordpress' );
define('DB_PASSWORD','WordPress@website103' );
###
restorecon -Rvv .
```

**phpMyAdmin 登入**
新增 資料庫 wordpress / utf8-general-ci
(wordpress database)新增 權限 user 
username/userpassword/hostname/
only wordpress database privillege
apply

**wordpress 登入**
web title
username/userpasswrd/mail
check box V, disable search engines

login check


